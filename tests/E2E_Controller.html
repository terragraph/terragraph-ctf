<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tests/E2E_Controller">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">E2E Controller Tests | Terragraph CTF</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://terragraph.github.io/terragraph-ctf/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" name="twitter:image" content="https://terragraph.github.io/terragraph-ctf/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" property="og:url" content="https://terragraph.github.io/terragraph-ctf/tests/E2E_Controller"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="E2E Controller Tests | Terragraph CTF"><meta data-rh="true" name="description" content="Basic Tests"><meta data-rh="true" property="og:description" content="Basic Tests"><link data-rh="true" rel="icon" href="/terragraph-ctf/logo/terragraph-logo-favicon-32x32-full-RGB.png"><link data-rh="true" rel="canonical" href="https://terragraph.github.io/terragraph-ctf/tests/E2E_Controller"><link data-rh="true" rel="alternate" href="https://terragraph.github.io/terragraph-ctf/tests/E2E_Controller" hreflang="en"><link data-rh="true" rel="alternate" href="https://terragraph.github.io/terragraph-ctf/tests/E2E_Controller" hreflang="x-default"><link rel="stylesheet" href="/terragraph-ctf/katex/katex.min.css"><link rel="stylesheet" href="/terragraph-ctf/assets/css/styles.273bd273.css">
<link rel="preload" href="/terragraph-ctf/assets/js/runtime~main.4f2908c1.js" as="script">
<link rel="preload" href="/terragraph-ctf/assets/js/main.c9eb538a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/terragraph-ctf/"><div class="navbar__logo"><img src="/terragraph-ctf/logo/terragraph-logo-favicon-32x32-full-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/terragraph-ctf/logo/terragraph-logo-favicon-32x32-white-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/terragraph/terragraph-ctf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link githubButton navbarIconButton" title="GitHub"></a><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link discordButton navbarIconButton" title="Discord"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/terragraph-ctf/">Terragraph Test Plans</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/terragraph-ctf/tests/IBF">Tests</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/IBF">IBF Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Association">Association Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Throughput">Throughput Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Link_Adaptation">Link Adaptation Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Interference">Interference Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/802.1X">802.1X Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/WSEC">WSEC (WPA-PSK) Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/LLS">Link Level Scheduler Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Scans">Scan Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/SW_Hybrid">SW Hybrid Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Y_Street">Y-Street Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Z_Street">Z-Street Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Coordinated_Scheduling">Coordinated Scheduling Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/terragraph-ctf/tests/E2E_Controller">E2E Controller Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Stability">Stability Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/RFC_2544">RFC 2544 Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Routing">Routing Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Prefix_Allocation">Prefix Allocation (CPA/DPA) Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/QoS">QoS Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/terragraph-ctf/tests/Link_Overloading">Link Overloading Tests</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/terragraph-ctf/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tests</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">E2E Controller Tests</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>E2E Controller Tests</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-tests">Basic Tests<a class="hash-link" href="#basic-tests" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-reg-1-rf-software-upgradedowngrade-test"><code>PUMA_RF_E2E-REG-1</code> RF Software Upgrade/Downgrade Test<a class="hash-link" href="#puma_rf_e2e-reg-1-rf-software-upgradedowngrade-test" title="Direct link to heading">​</a></h3><p>Description: This test is to check that the network successfully does upgrade
and downgrade and comes back online after software upgrade/downgrade.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Upgrade both primary and backup controller to new version</li><li>Downgrade to a previous stable code</li><li>Download code and upgrade whole network to new version</li><li>Measure time taken for prepare and commit phase</li></ul><p>Pass/Fail Criteria:</p><ul><li>All nodes should be able to download new code and run upgrade and successful
come back online within given timeout</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-reg-2-power-outage-network-recovery-test"><code>PUMA_RF_E2E-REG-2</code> Power Outage network recovery Test<a class="hash-link" href="#puma_rf_e2e-reg-2-power-outage-network-recovery-test" title="Direct link to heading">​</a></h3><p>Description: This test checks that after power outage the network ignites by
itself.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Check network is ignited</li><li>Power cycle all nodes by using the PDUs on the poles remotely</li><li>Check network recovery</li><li>Repeat 10 times</li></ul><p>Pass/Fail Criteria:</p><ul><li>Validate all links and nodes come back online after power failure within given
timeout</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-reg-3-pop-fiber-cut-test-multi-pop"><code>PUMA_RF_E2E-REG-3</code> POP Fiber cut Test (multi-POP)<a class="hash-link" href="#puma_rf_e2e-reg-3-pop-fiber-cut-test-multi-pop" title="Direct link to heading">​</a></h3><p>Description: This test is to check that if connection to 1 POP node is
terminated then the network will recover and reroute through the other POP
nodes.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Check network is ignited</li><li>Switch off fiber port on ubiquiti switch connecting to one of the POP nodes</li></ul><p>Pass/Fail Criteria:</p><ul><li>Network should recover and reroute through other POP node</li><li>All links and nodes should be online in the topology</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-reg-4-pop-fiber-cut-test-single-pop"><code>PUMA_RF_E2E-REG-4</code> POP Fiber cut Test (single-POP)<a class="hash-link" href="#puma_rf_e2e-reg-4-pop-fiber-cut-test-single-pop" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology with single POP. Post network ignition, cutting the fiber
from switch to POP and checking whether the network is down</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Ignite the topology (single POP)</li><li>switch off fiber port on ubiquiti switch connecting to POP</li><li>switch on the fiber port on ubiquiti switch connecting to POP</li></ul><p>Pass/Fail Criteria:</p><ul><li>Network goes down after the fiber cut to POP happens.</li><li>After switching on the fiber connectivity to POP the network should be up and
active.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-1-network-ignition-tests"><code>PUMA_RF_E2E-1</code> Network Ignition Tests<a class="hash-link" href="#puma_rf_e2e-1-network-ignition-tests" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology. Post network ignition, each node in the topology is pinged
from the controller to validate connectivity.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Bring up the network using x86 controller. To bring up a network,<ul><li>Existing topology file can be copied to the controller and controller can
be started using systemctl services.</li></ul></li><li>After ignition of the network, ping from E2E to all nodes.</li><li>Check whether the network is up and active.</li><li>Check the ignition state of the controller using REST API.
(<code>/api/getIgnitionState</code>)</li></ul><p>Pass/Fail Criteria:</p><ul><li>All links remain up and reachable from controller to all nodes and ping
session remains unaffected.</li><li>Ping from E2E to all nodes should succeed.</li><li>Ignition time of the fig-of-8 network must be less than 5 min.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-2-pop-node-power-cycle-test"><code>PUMA_RF_E2E-2</code> POP node power cycle test<a class="hash-link" href="#puma_rf_e2e-2-pop-node-power-cycle-test" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology.  In this test, POP node comes back online after the power
cycle and all links and nodes in the network are expected to recover.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Bring up the network using x86 controller with all the nodes.</li><li>Check whether the network is up and active.</li><li>Power cycle the pop_node in the topology (<code>/api/rebootNode</code>)</li><li>While pop_node is down, send traffic through POP node to all other nodes.</li><li>While sending traffic when POP node is down, throughput drops to zero.</li><li>After POP is up, throughput should raise.</li><li>Validate all wireless links are up and routable from the pop_node.</li></ul><p>Pass/Fail Criteria:</p><ul><li>Throughput of zero is observed while traffic is pushed from controller when
POP is down.</li><li>Raising in the throughput value should happen while traffic is pushed from
controller after POP is up.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-3-node-failure-during-network-ignition"><code>PUMA_RF_E2E-3</code> Node failure during network ignition<a class="hash-link" href="#puma_rf_e2e-3-node-failure-during-network-ignition" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology.  However, during the process of network ignition, some
node are rebooted and check whether E2E is bringing up the network.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Ignite the network using x86 controller.</li><li>During network ignition, randomly pick a DN and reboot it.</li><li>Wait for the last DN to boot up (ping sectors through OOB).</li><li>Check to see all the links in the topology came up successfully.</li><li>Ping each node and see for connectivity.</li><li>Iterate node bootup for 5 times and check for connectivity</li></ul><p>Pass/Fail Criteria:</p><ul><li>All the links in the testbed successfully come up.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-4-link-failure-during-network-ignition"><code>PUMA_RF_E2E-4</code> Link failure during network ignition<a class="hash-link" href="#puma_rf_e2e-4-link-failure-during-network-ignition" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology. During the process of network ignition, any of the
previously ignited links goes down.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using x86 controller.</li><li>During network ignition, bring down an ignited link (tg link down/attenuator)
using <code>/api/setLinkStatus</code>.</li><li>Check to see all the links in the topology came up successfully after 60
sec (re-ignition time?).</li><li>Ping all nodes and see for connectivity.</li></ol><p>Pass/Fail Criteria:</p><ol><li>All the links in the testbed successfully come up.</li><li>No wireless link takes more than 5 attempts to come up.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-5-repeated-link-failures-post-network-ignition"><code>PUMA_RF_E2E-5</code> Repeated link failure(s) post network ignition<a class="hash-link" href="#puma_rf_e2e-5-repeated-link-failures-post-network-ignition" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology. During the process of network ignition, any of the
previously ignited links go down repeatedly.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network and ping across each wireless link to validate
connectivity.</li><li>Pick any wireless links at random and take them down (<code>tg link down</code>) using
<code>/api/setLinkStatus</code>.</li><li>Wait (X*60) seconds for E2E controller to re-ignite links.<ul><li>X = { 1, 2, 3, 4 }</li></ul></li><li>Ping across each wireless link (can use lo interface) to validate
connectivity. (<code>/api/startPing</code>)</li><li>Ping to each end of each wireless link to validate they are reachable via E2E
controller and pop_node.</li><li>Repeat the above steps 20 times.</li></ol><p>Pass/Fail Criteria:</p><ol><li>Network check to see all the links in the topology came up successfully.</li><li>E2E controller is able to re-ignite all links taken down within (X*60)
seconds and they are pingable across local DN sector interfaces and reachable
via the pop_node.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-6-repeated-node-failures-post-network-ignition"><code>PUMA_RF_E2E-6</code> Repeated node failure(s) post network ignition<a class="hash-link" href="#puma_rf_e2e-6-repeated-node-failures-post-network-ignition" title="Direct link to heading">​</a></h3><p>Description: This test checks network ignition functionality on a standard
figure of 8 topology. During the process of network ignition, any of the
previously ignited node go down repeatedly.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Ignite the network topology using x86 controller.</li><li>Ping across each wireless link (using link local addresses) to validate
connectivity. (<code>/api/startPing</code>)</li><li>Pick up to X DN sectors at random and take them down (via reboot).
(<code>/api/rebootNode</code>)</li><li>Wait (X*60) seconds for DNs to boot up within 60 seconds.<ul><li>X = { 1, 2, 3, 4 }</li></ul></li><li>Wait (X*60) seconds for E2E controller to re-ignite all DN sectors.<ul><li>X = { 1, 2, 3, 4 }</li></ul></li><li>Ping each sector from pop_node.</li><li>Repeat the above steps 10 times.</li></ul><p>Pass/Fail Criteria:</p><ul><li>Check to see all the links in the topology came up successfully.</li><li>E2E controller is able to re-ignite all DN sectors taken down within (X*60)
seconds of them coming up and they are reachable via the pop_node.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-7-network-outage-to-controller"><code>PUMA_RF_E2E-7</code> Network outage to controller<a class="hash-link" href="#puma_rf_e2e-7-network-outage-to-controller" title="Direct link to heading">​</a></h3><p>Description: This test checks whether network is unperturbed by temporary loss
of connectivity to E2E in figure of 8 topology.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using x86 controller.</li><li>Check network state to verify if all links are enabled and nodes are
reachable(recheck network state).</li><li>Take down controller network interface for 300 sec (but do not shut down the
controller)<ul><li><code>ifconfig ens160 down; sleep 300; ifconfig ens160 up</code></li></ul></li><li>In parallel, Ping between nodes while the controller is not reachable from
them.</li><li>Recheck network state again after 300sec while pinging across all the nodes</li></ol><p>Pass/Fail Criteria:</p><ol><li>All paths are up and operational after restoration of connection to E2E</li><li>Ping between all nodes/Paths should have 0% packet loss.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-8-controller-crash-test"><code>PUMA_RF_E2E-8</code> Controller crash test<a class="hash-link" href="#puma_rf_e2e-8-controller-crash-test" title="Direct link to heading">​</a></h3><p>Description: This test checks whether network is unperturbed by killing E2E in
figure of 8 topology.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using x86 controller.</li><li>Check network state to verify if all links are enabled and nodes are
reachable(recheck network state).</li><li>Start iterate (count: 5)<ol><li>Start ping from from POP to any node and in parallel, kill E2E controller
on the controller x86. Ping across each wireless link (using lo address)
to validate L3 wireless connectivity. (<code>killall e2e_controller</code>)</li><li>Bring down any link in the network while E2E is down. (<code>tg link down</code>)</li><li>Re-spawn E2E controller on x86 and wait 60 seconds</li></ol></li><li>End iterate</li></ol><p>Pass/Fail Criteria:</p><ol><li>All links remain up and reachable via POP node after re-spawning E2E
controller.</li><li>Ping session remains unaffected during the duration of controller
kill/restart.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-9-software-upgradedowngrade-test-using-bittorrent"><code>PUMA_RF_E2E-9</code> Software Upgrade/Downgrade test using BitTorrent<a class="hash-link" href="#puma_rf_e2e-9-software-upgradedowngrade-test-using-bittorrent" title="Direct link to heading">​</a></h3><p>Description: The purpose of this test is to validate the BitTorrent SW upgrade
process at the network level, for a figure of &quot;8&quot; network topology.</p><p>Test Setup: Fig-of-8</p><p>Upgrade steps:</p><ul><li>Add the image binary file manually to the <code>/data/images</code> directory and restart
controller.</li><li>The image file name has to be in the format <code>&lt;NAME&gt;.bin</code> where NAME is the MD5
string of the binary image. The MD5 string is part of the binary file header.</li><li>During ignition of controller, global addressable ipv6 interface on the
controller is set on the flag as <code>bt_tracker_ipv6_global_addressable_ifname</code>
&quot;interfacename&quot;.</li></ul><p>APIs used:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/api/sendUpgradeRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/getUpgradeState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/getUpgradeCommitPlan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/addUpgradeImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/delUpgradeImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/listUpgradeImages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/abortUpgrade</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Procedure:</p><ol><li>Bring up TG network using E2E controller on a X86 machine. Set the flag
<code>bt_tracker_ipv6_global_addressable_ifname</code> &quot;interfacename&quot; during ignition.</li><li>Start the tracker in the port 6969 by running command:<ul><li><code>tg upgrade torrent start_tracker -g ens160 -p 6969</code></li></ul></li><li>Kill the running e2e_controller and then start again.</li><li>Run the prepare torrent command&quot;<ul><li><code>tg upgrade network prepare_torrent -m &#x27;magnet url&#x27; --md5 &#x27;md5 of bin&#x27;</code></li><li>Magnet url and md5 can be obtained by running command on the controller:<ul><li><code>tg upgrade torrent list_images</code></li></ul></li></ul></li><li>Run a script (<code>/data/stop_minion.sh</code>) on all nodes to emulate random nodes
down by restarting e2e_minion at random time interval.</li><li>Delay for 300 seconds</li><li>Check if all nodes are prepared (excluding the ones which were
down). Optimization: All nodes should be prepared.</li><li>Run command to prepare all nodes again.</li><li>Check if all nodes are prepared (including the ones which were down).</li><li>Commit upgrade:<ul><li><code>tg upgrade network commit</code></li></ul></li><li>Verify if upgrade is successful.</li><li>Follow the steps from 2 to 10 for downgrade with new image.</li><li>Verify if downgrade is successful.</li></ol><p>Pass/Fail Criteria:</p><ol><li>Network comes up with new software for all nodes.</li><li>Optimization: Nodes are not reflashed a 2nd time with same software version.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-10-remove-and-add-nodes-and-links-from-topology-file"><code>PUMA_RF_E2E-10</code> Remove and add nodes and links from topology file<a class="hash-link" href="#puma_rf_e2e-10-remove-and-add-nodes-and-links-from-topology-file" title="Direct link to heading">​</a></h3><p>Description: Validate controller addition and deletion of nodes/links to
topology from the TG CLI.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Bring up network using x86 controller and check if all links are up.</li><li>Disable auto-ignition.</li><li>Bring down 1 or 2 links from the topology</li><li>Remove the links brought down in step 3 using E2E API.</li><li>Remove nodes forming the links which are down from the topology using E2E
CLI.</li><li>check if the E2E state machine is stable and nodes are deleted.</li><li>Add nodes back to topology using API.</li><li>Add the deleted links back to topology using API.</li><li>Make the links alive by using API.</li><li>Enable auto ignition.</li><li>Verify the new nodes are now in topology and reporting to controller</li><li>Run ping to verify connectivity.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">APIs used:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/setLinkStatus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/setIgnitionState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/addLink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/delLink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/addNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/delNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/startPing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pass/Fail Criteria:</p><ol><li>Verify that the E2E state machine is stable and nodes are deleted and added
back.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-11-verify-controller-side-config-validation-framework"><code>PUMA_RF_E2E-11</code> Verify controller side config validation framework<a class="hash-link" href="#puma_rf_e2e-11-verify-controller-side-config-validation-framework" title="Direct link to heading">​</a></h3><p>Description: E2E Verify controller config tests to validate E2E will throw error
if incorrect values are pushed for the nodes.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite network using x86 controller.</li><li>Set <code>forceGpsDisable</code> to &quot;x&quot; for a node using TG CLI on the controller.</li><li>Set <code>OOB_INTERFACE</code> to &quot;nic3&quot; for the network or particular node using TG
CLI.</li><li>Set <code>laMaxMcs</code> to 50 using TG CLI on controller.</li><li>Check if all commands fail with error and config is not pushed to network.</li></ol><p>APIs used:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/api/setNodeOverridesConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/getNodeOverridesConfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pass/Fail Criteria:</p><ol><li>Verify if the config is validated on the controller side and incorrect values
are not pushed to the network.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-122-multiple-node-bgp-pop-config"><code>PUMA_RF_E2E-12.2</code> Multiple node BGP POP config<a class="hash-link" href="#puma_rf_e2e-122-multiple-node-bgp-pop-config" title="Direct link to heading">​</a></h3><p>Description: To test multiple BGP sessions to two different IP&#x27;s on switch using
different sites in a network.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Configure multiple BGP sessions from 2 different switches to both the POP
sites.</li><li>Ignite the network and validate both POP are up.</li><li>Disconnect fiber cable from one POP (manually? / port down?).</li><li>Run pings from both the POP nodes.</li><li>While ping is running, cut POP and check for ping latency.</li></ol><p>APIs used:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/api/getNodeConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/setNodeOverridesConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/api/getNodeOverridesConfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pass/Fail Criteria:</p><ol><li>All pings go through and there is no loss of connectivity while failing POP
or connectivity to router.</li><li>Ping latency (need to confirm numbers)</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-121-network-ignition-with-2-pop-sites-with-bgp"><code>PUMA_RF_E2E-12.1</code> Network ignition with 2 POP sites with BGP<a class="hash-link" href="#puma_rf_e2e-121-network-ignition-with-2-pop-sites-with-bgp" title="Direct link to heading">​</a></h3><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Configure 2 sites on fig-8 as POP nodes with BGP configured to the same peer</li><li>Ignite the network and validate both POP nodes and whole network is up</li><li>Validate BGP sessions are established on both POP nodes and default route is
advertized</li><li>Ping all nodes from POP sites to validate connectivity</li></ol><p>Pass/Fail Criteria:</p><ol><li>Network Ignites successfully</li><li>Both POP nodes are online, with BGP established and advertising default</li><li>All pings go through</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-131-high-availability-test---network-interface-down-on-primary-e2e"><code>PUMA_RF_E2E-13.1</code> High Availability test - network interface Down on primary E2E<a class="hash-link" href="#puma_rf_e2e-131-high-availability-test---network-interface-down-on-primary-e2e" title="Direct link to heading">​</a></h3><p>Description: This test checks high availability feature of E2E on a standard
figure of 8 topology (with two E2E controllers on a network).</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using primary x86 controller with all the necessary
controller configs on primary and secondary.</li><li>Check network state to verify if all links are enabled and nodes are
reachable (recheck network state).</li><li>In parallel:<ol><li>Take down primary controller network interface for 300 sec (but do not
shut down the controller).</li><li>Ping between nodes.</li></ol></li><li>Ping all nodes from primary controller.</li><li>Check state. (<code>/api/getHighAvailabilityState</code>)</li></ol><p>Pass/Fail Criteria:</p><ol><li>All paths are up and operational after restoration of connection to E2E and
ping between all nodes/Paths should have 0% packet loss.</li><li>when primary controller is down the backup should be in &#x27;active&#x27; state and
network should remain up</li><li>when primary is restarted, it should go back to &#x27;active&#x27; state and backup
should go back to &#x27;passive&#x27; state</li><li>All links and nodes in network should remain online</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-132-high-availability-test---reboot-primary-e2e"><code>PUMA_RF_E2E-13.2</code> High Availability test - reboot primary E2E<a class="hash-link" href="#puma_rf_e2e-132-high-availability-test---reboot-primary-e2e" title="Direct link to heading">​</a></h3><p>Description: This test checks high availability feature of E2E on a standard
figure of 8 topology (with two E2E controllers on a network).</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using primary x86 controller with all the necessary
controller configs on primary and secondary.</li><li>Check network state to verify if all links are enabled and nodes are
reachable (recheck network state).</li><li>In parallel:<ol><li>Reboot the primary E2E</li><li>Ping between nodes.</li></ol></li><li>Ping all nodes from primary controller.</li><li>Check state. (<code>/api/getHighAvailabilityState</code>)</li></ol><p>Pass/Fail Criteria:</p><ol><li>All paths are up and operational after restoration of connection to E2E and
ping between all nodes/Paths should have 0% packet loss.</li><li>when primary controller is down the backup should be in &#x27;active&#x27; state and
network should remain up</li><li>when primary is restarted, it should go back to &#x27;active&#x27; state and backup
should go back to &#x27;passive&#x27; state</li><li>All links and nodes in network should remain online</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-14-controller-switch-after-topology-change-changes-reflect-in-passive-controller"><code>PUMA_RF_E2E-14</code> Controller switch after topology change, changes reflect in passive controller<a class="hash-link" href="#puma_rf_e2e-14-controller-switch-after-topology-change-changes-reflect-in-passive-controller" title="Direct link to heading">​</a></h3><p>Description: This test checks high availability feature of E2E on a standard
figure of 8 topology (with two E2E controllers on a network).</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Ignite the network using primary x86 controller with all the necessary
controller configs on primary and secondary.</li><li>Check network state to verify if all links are enabled and nodes are
reachable (recheck network state).</li><li>Ping all nodes from primary controller</li><li>Remove some links and nodes in the topology file.<ol><li>Backup original topology file to later restore</li></ol></li><li>Confirm change propagated back to secondary</li><li>Give outage to primary for 300s and restore original topology on primary</li><li>Ping all nodes from secondary controller - during 300s outage - Ensure its
the same as step 5 missing the changes made</li><li>After primary comes up ensure another ping check matches step 5</li></ol><p>Pass/Fail Criteria:</p><ol><li>All paths are up and operational after restoration of connection to E2E</li><li>Ping between all nodes/Paths should have 0% packet loss</li><li>At the end of step 6, passive controller topology should not include the
nodes and links removed.</li><li>At the end of step 8, passive controller topology should show the nodes and
links added.</li><li>Ping between all nodes/Paths should have 0% packet loss</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-15-e2e-does-not-report-link-re-ignitions-in-if-steady-state"><code>PUMA_RF_E2E-15</code> E2E does not report link re-ignitions in IF steady state<a class="hash-link" href="#puma_rf_e2e-15-e2e-does-not-report-link-re-ignitions-in-if-steady-state" title="Direct link to heading">​</a></h3><p>Description: To verify there are no link re-ignition attempts when the network
is stable.</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ol><li>Bring up TG network using E2E controller on x86 machine.</li><li>Recheck network state.</li><li>Ping for 3660 seconds on all terra interface for all links.</li><li>Recheck network state.</li></ol><p>Pass/Fail Criteria:</p><ol><li>All pings should go through with 0% packet loss.</li><li>LinkupAttempts in the topology should not increment.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-17-change-channel-mcs-txpower-disable-gps-of-entire-network"><code>PUMA_RF_E2E-17</code> Change channel, MCS, txpower, Disable GPS of entire network<a class="hash-link" href="#puma_rf_e2e-17-change-channel-mcs-txpower-disable-gps-of-entire-network" title="Direct link to heading">​</a></h3><p>Description: Validate if network remains in a stable state if channel, MCS,
TxPower is changed and all nodes are up. Also, check if network remains in a
stable state if GPS is disabled in-band using config manager.</p><p>Test Setup: Fig-of-8(RF)</p><p>Procedure:</p><ol><li>Bring up the F8-CN network using the E2E controller with managed config
enabled</li><li>Change channel to 3.<ol><li><code>tg fw network channel_config --channel #</code> (# = 1, 3, &amp; 4)</li><li><code>/api/setNodeOverridesConfig</code></li></ol></li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27; when config is changed so links and node should stay up
after config change)</li><li>Check fw params to see if channel is updated</li><li>Change channel back to 2.</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check fw params to see if channel is updated</li><li>Change MCS to 3/5/7/9/10/12 on all nodes using E2E API</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check fw params to see if channel is updated</li><li>Change MCS back to 12.</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check fw params to see if channel is updated</li><li>Change TxPower to 12/17/21 on different nodes using using E2E API.</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check fw params to see if channel is updated</li><li>Change TxPower back to 21.</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check fw params to see if channel is updated</li><li>Disable GPS for whole network using E2E API (timeout: 300 sec)</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li><li>Check if GPS is disabled in all nodes in firmware</li><li>Enable GPS back in all nodes.</li><li>Check if network remains up after config change (expected action is &#x27;set fw
params when changed&#x27;)</li></ol><p>Pass/Fail Criteria:</p><ul><li>Verify channel is changed for whole network and all nodes/link are online on
new channel using TG CLI after step 5.</li><li>MCS is changed for whole network and all nodes/link are online. Nodes and
links should not flap while MCS is changed (after step 9)</li><li>TxPower is changed for whole network and all nodes/link are online (after step
11). Nodes and links should not flap while Tx power is changed.</li><li>Network remains up with GPS disabled on all nodes.(after step 15)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-18-e2e-controller-should-ignite-the-cns-even-when-some-other-cns-andor-links-are-down"><code>PUMA_RF_E2E-18</code> E2E controller should ignite the CNs even when some other CNs and/or links are down<a class="hash-link" href="#puma_rf_e2e-18-e2e-controller-should-ignite-the-cns-even-when-some-other-cns-andor-links-are-down" title="Direct link to heading">​</a></h3><p>Description: To verify that E2E controller is able to ignite the P2MP setup even
when some nodes and links are down.</p><p>Test Setup: P2MP</p><p>Procedure:</p><ol><li>Bring up TG network(P2MP setup) using E2E controller on x86 machine.</li><li>Recheck network state.</li><li>Stop minion on CN0, CN1, CN2 and CN3.</li><li>Recheck network state should show the CN0,CN1, CN2 and CN3 nodes as offline
and links associated with them as false.</li><li>Give a delay of 60 seconds.</li><li>Start minion on CN0 and CN1.</li><li>Recheck network state should show the CN2 and CN3 nodes as offline and links
associated with them as false while other links(CN0 and CN1) should be
ignited.</li><li>Stop minion service on  CN0 and CN1.</li><li>Start minion on CN2 and CN3.</li><li>Give a delay of 60 seconds and check network state</li><li>Recheck network state should show the CN0 and CN1 nodes as offline and links
associated with them as false. CN2 and CN3 should show as ONLINE and links
associated with them as true.</li><li>Start minion on CN0 and CN1.</li><li>Network should come up with all nodes after a delay of 60 seconds.</li></ol><p>Pass/Fail Criteria:</p><ol><li>Recheck network state after step 13 should have all the nodes as online and
all links as true.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="neighbor-discovery-tests">Neighbor Discovery Tests<a class="hash-link" href="#neighbor-discovery-tests" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-19-topology-scan-tests"><code>PUMA_RF_E2E-19</code> Topology Scan tests<a class="hash-link" href="#puma_rf_e2e-19-topology-scan-tests" title="Direct link to heading">​</a></h3><p>Description: This test performs a topology scan at a given node, returning
information about nearby nodes in a P2MP setup.</p><p>Test Setup: RF P2MP</p><p>Procedure:</p><ol><li>Start the E2E controller service in E2E controller</li><li>Set the auto ignition to be disabled.</li><li>Shut down the DN --&gt; CN1 and DN—CN2 links down (<code>tg link down</code>)</li><li>Initiate a Topology Scan (2 times) from DN using API service (<code>txNode</code>: DN)
using <code>/api/startTopologyScan</code>.</li></ol><p>Pass/Fail Criteria:</p><ul><li>The output of the API call must have the details of all the CN1 and CN2(whose
links are down) as responders address in the network. It must have 2 outputs
with all the CN&#x27;s details.</li><li>Check in the output of API for the CN1 and CN2 MAC address</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-20-link-discovery-scan-tests"><code>PUMA_RF_E2E-20</code> Link Discovery scan tests<a class="hash-link" href="#puma_rf_e2e-20-link-discovery-scan-tests" title="Direct link to heading">​</a></h3><p>Description: This test performs a link discovery scan at a given node, returning
information about the best link(s) for a node.</p><p>Test Setup: RF P2MP</p><p>Procedure:</p><ol><li>Start the E2E controller service in E2E controller</li><li>Set the auto ignition to be disabled. (Make sure the DNs and CN0 link is not
alive with <code>tg link down</code>)</li><li>Initiate a Topology Scan from CN using API service (<code>targetMac</code>: CN0) using
<code>/api/startLinkDiscoveryScan</code>.</li><li>Use API call to get the results of the scan status.
(<code>/api/getLinkDiscoveryScanStatus</code>)</li></ol><p>Pass/Fail Criteria:</p><ul><li>At the end of step 3, &quot;Link discovery scans started&#x27; message must be received.</li><li>The output of the API call after step 4 must have the MAC address of DN which
have link in the topology file.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-21-redundancy-dn-goes-down"><code>PUMA_RF_E2E-21</code> Redundancy-DN goes down<a class="hash-link" href="#puma_rf_e2e-21-redundancy-dn-goes-down" title="Direct link to heading">​</a></h3><p>Description: P2P test between DN-P and CN where DN-P goes down and CN connects
to the backup DN-B</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Initialize the topology with the backup link DN-B ↔ CN and add
is_backup_cn_link = true</li><li>Bring up the link Between DN-P ↔ CN using E2E</li><li>Power down DN-P using PDU (don&#x27;t bring it up)</li><li>Controller should bring up the link between DN-B ↔ CN (Only if DN-P has been
down for over 5 mins as <code>linkup_backup_cn_link_interval</code> default value is 5
mins)<ul><li>Run test with different interval values: 30 sec, 1 min, 3 min and default
value (5 min)</li></ul></li></ul><p>Passing:</p><ul><li>E2E controller will ignite the DN-B ↔ CN link after DN-P goes down</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-22-redundancy-dn-goes-down"><code>PUMA_RF_E2E-22</code> Redundancy-DN goes down<a class="hash-link" href="#puma_rf_e2e-22-redundancy-dn-goes-down" title="Direct link to heading">​</a></h3><p>Description: P2P test between DN-P and CN where DN-P ↔ CN goes down DN-P turns
off and CN connects to the backup DN-B</p><p>Test Setup: Fig-of-8</p><p>Procedure:</p><ul><li>Initialize the topology with the backup link DN-B ↔ CN and add
is_backup_cn_link = true</li><li>Bring up the link Between DN-P ↔ CN using E2E</li><li>Bring down the link between DN-P ↔ CN and then power off DN-P using PDU</li><li>Controller should bring up the link between DN-B ↔ CN (Only if DN-P has been
down for over 5 mins as <code>linkup_backup_cn_link_interval</code> default value is 5
mins)<ul><li>Run test with different interval values: 30 sec, 1 min, 3 min and default
value (5 min)</li></ul></li></ul><p>Passing:</p><ul><li>E2E controller will ignite the DN-B ↔ CN link after DN-P goes down</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-23-redundancy-cn-goes-down"><code>PUMA_RF_E2E-23</code> Redundancy-CN goes down<a class="hash-link" href="#puma_rf_e2e-23-redundancy-cn-goes-down" title="Direct link to heading">​</a></h3><p>Description: P2P test between DN and CN where CN goes down and comes back up and
it connects back to DN-P</p><p>Procedure:</p><ul><li>Initialize the topology with the backup link DN-B ↔ CN and add
is_backup_cn_link = true</li><li>Bring up the link Between DN-P ↔ CN using E2E</li><li>Reboot CN</li><li>Controller brings up the link between DN-P ↔ CN</li></ul><p>Passing:</p><ul><li>E2E controller will ignite the DN-P ↔ CN link after CN reboots</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puma_rf_e2e-24-redundancy-cn-goes-down"><code>PUMA_RF_E2E-24</code> Redundancy-CN goes down<a class="hash-link" href="#puma_rf_e2e-24-redundancy-cn-goes-down" title="Direct link to heading">​</a></h3><p>Description: P2P test between DN and CN where CN goes down for over 5 mins and
comes back up and it connects back to either DN-P or DN-B</p><p>Procedure:</p><ul><li>Initialize the topology with the backup link DN-B ↔ CN and add
is_backup_cn_link = true</li><li>Bring up the link Between DN-P ↔ CN using E2E</li><li>Power down CN for over 5 mins(using PDU) and power it on</li><li>Controller brings up the link between DN-P ↔ CN or DN-B ↔ CN</li></ul><p>Passing:</p><ul><li>E2E controller will ignite either DN-P ↔ CN or DN-B ↔ CN after CN powers on.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/terragraph/terragraph-ctf/edit/main/docs/../docs/tests/E2E_Controller.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/terragraph-ctf/tests/Coordinated_Scheduling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Coordinated Scheduling Tests</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/terragraph-ctf/tests/Stability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Stability Tests</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-tests" class="table-of-contents__link toc-highlight">Basic Tests</a><ul><li><a href="#puma_rf_e2e-reg-1-rf-software-upgradedowngrade-test" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-REG-1</code> RF Software Upgrade/Downgrade Test</a></li><li><a href="#puma_rf_e2e-reg-2-power-outage-network-recovery-test" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-REG-2</code> Power Outage network recovery Test</a></li><li><a href="#puma_rf_e2e-reg-3-pop-fiber-cut-test-multi-pop" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-REG-3</code> POP Fiber cut Test (multi-POP)</a></li><li><a href="#puma_rf_e2e-reg-4-pop-fiber-cut-test-single-pop" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-REG-4</code> POP Fiber cut Test (single-POP)</a></li><li><a href="#puma_rf_e2e-1-network-ignition-tests" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-1</code> Network Ignition Tests</a></li><li><a href="#puma_rf_e2e-2-pop-node-power-cycle-test" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-2</code> POP node power cycle test</a></li><li><a href="#puma_rf_e2e-3-node-failure-during-network-ignition" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-3</code> Node failure during network ignition</a></li><li><a href="#puma_rf_e2e-4-link-failure-during-network-ignition" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-4</code> Link failure during network ignition</a></li><li><a href="#puma_rf_e2e-5-repeated-link-failures-post-network-ignition" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-5</code> Repeated link failure(s) post network ignition</a></li><li><a href="#puma_rf_e2e-6-repeated-node-failures-post-network-ignition" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-6</code> Repeated node failure(s) post network ignition</a></li><li><a href="#puma_rf_e2e-7-network-outage-to-controller" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-7</code> Network outage to controller</a></li><li><a href="#puma_rf_e2e-8-controller-crash-test" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-8</code> Controller crash test</a></li><li><a href="#puma_rf_e2e-9-software-upgradedowngrade-test-using-bittorrent" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-9</code> Software Upgrade/Downgrade test using BitTorrent</a></li><li><a href="#puma_rf_e2e-10-remove-and-add-nodes-and-links-from-topology-file" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-10</code> Remove and add nodes and links from topology file</a></li><li><a href="#puma_rf_e2e-11-verify-controller-side-config-validation-framework" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-11</code> Verify controller side config validation framework</a></li><li><a href="#puma_rf_e2e-122-multiple-node-bgp-pop-config" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-12.2</code> Multiple node BGP POP config</a></li><li><a href="#puma_rf_e2e-121-network-ignition-with-2-pop-sites-with-bgp" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-12.1</code> Network ignition with 2 POP sites with BGP</a></li><li><a href="#puma_rf_e2e-131-high-availability-test---network-interface-down-on-primary-e2e" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-13.1</code> High Availability test - network interface Down on primary E2E</a></li><li><a href="#puma_rf_e2e-132-high-availability-test---reboot-primary-e2e" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-13.2</code> High Availability test - reboot primary E2E</a></li><li><a href="#puma_rf_e2e-14-controller-switch-after-topology-change-changes-reflect-in-passive-controller" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-14</code> Controller switch after topology change, changes reflect in passive controller</a></li><li><a href="#puma_rf_e2e-15-e2e-does-not-report-link-re-ignitions-in-if-steady-state" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-15</code> E2E does not report link re-ignitions in IF steady state</a></li><li><a href="#puma_rf_e2e-17-change-channel-mcs-txpower-disable-gps-of-entire-network" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-17</code> Change channel, MCS, txpower, Disable GPS of entire network</a></li><li><a href="#puma_rf_e2e-18-e2e-controller-should-ignite-the-cns-even-when-some-other-cns-andor-links-are-down" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-18</code> E2E controller should ignite the CNs even when some other CNs and/or links are down</a></li></ul></li><li><a href="#neighbor-discovery-tests" class="table-of-contents__link toc-highlight">Neighbor Discovery Tests</a><ul><li><a href="#puma_rf_e2e-19-topology-scan-tests" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-19</code> Topology Scan tests</a></li><li><a href="#puma_rf_e2e-20-link-discovery-scan-tests" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-20</code> Link Discovery scan tests</a></li><li><a href="#puma_rf_e2e-21-redundancy-dn-goes-down" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-21</code> Redundancy-DN goes down</a></li><li><a href="#puma_rf_e2e-22-redundancy-dn-goes-down" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-22</code> Redundancy-DN goes down</a></li><li><a href="#puma_rf_e2e-23-redundancy-cn-goes-down" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-23</code> Redundancy-CN goes down</a></li><li><a href="#puma_rf_e2e-24-redundancy-cn-goes-down" class="table-of-contents__link toc-highlight"><code>PUMA_RF_E2E-24</code> Redundancy-CN goes down</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Terragraph</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://terragraph.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terragraph<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/connectivity/solutions/terragraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meta Connectivity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/terragraph/meta-terragraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terragraph<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/terragraph/terragraph-planner" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terragraph Planner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/terragraph/tgnms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terragraph NMS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/terragraph-ctf/assets/js/runtime~main.4f2908c1.js"></script>
<script src="/terragraph-ctf/assets/js/main.c9eb538a.js"></script>
</body>
</html>