"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[758],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var o=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,l=function(e,t){if(null==e)return{};var n,o,l={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},k=o.forwardRef((function(e,t){var n=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),k=p(n),c=l,h=k["".concat(s,".").concat(c)]||k[c]||u[c]||a;return n?o.createElement(h,i(i({ref:t},d),{},{components:n})):o.createElement(h,i({ref:t},d))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=n.length,i=new Array(a);i[0]=k;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,i[1]=r;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}k.displayName="MDXCreateElement"},1759:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>p});var o=n(7462),l=(n(7294),n(3905));const a={},i="E2E Controller Tests",r={unversionedId:"tests/E2E_Controller",id:"tests/E2E_Controller",title:"E2E Controller Tests",description:"Basic Tests",source:"@site/../docs/tests/E2E_Controller.md",sourceDirName:"tests",slug:"/tests/E2E_Controller",permalink:"/terragraph-ctf/tests/E2E_Controller",draft:!1,editUrl:"https://github.com/terragraph/terragraph-ctf/edit/main/docs/../docs/tests/E2E_Controller.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Coordinated Scheduling Tests",permalink:"/terragraph-ctf/tests/Coordinated_Scheduling"},next:{title:"Stability Tests",permalink:"/terragraph-ctf/tests/Stability"}},s={},p=[{value:"Basic Tests",id:"basic-tests",level:2},{value:"<code>PUMA_RF_E2E-REG-1</code> RF Software Upgrade/Downgrade Test",id:"puma_rf_e2e-reg-1-rf-software-upgradedowngrade-test",level:3},{value:"<code>PUMA_RF_E2E-REG-2</code> Power Outage network recovery Test",id:"puma_rf_e2e-reg-2-power-outage-network-recovery-test",level:3},{value:"<code>PUMA_RF_E2E-REG-3</code> POP Fiber cut Test (multi-POP)",id:"puma_rf_e2e-reg-3-pop-fiber-cut-test-multi-pop",level:3},{value:"<code>PUMA_RF_E2E-REG-4</code> POP Fiber cut Test (single-POP)",id:"puma_rf_e2e-reg-4-pop-fiber-cut-test-single-pop",level:3},{value:"<code>PUMA_RF_E2E-1</code> Network Ignition Tests",id:"puma_rf_e2e-1-network-ignition-tests",level:3},{value:"<code>PUMA_RF_E2E-2</code> POP node power cycle test",id:"puma_rf_e2e-2-pop-node-power-cycle-test",level:3},{value:"<code>PUMA_RF_E2E-3</code> Node failure during network ignition",id:"puma_rf_e2e-3-node-failure-during-network-ignition",level:3},{value:"<code>PUMA_RF_E2E-4</code> Link failure during network ignition",id:"puma_rf_e2e-4-link-failure-during-network-ignition",level:3},{value:"<code>PUMA_RF_E2E-5</code> Repeated link failure(s) post network ignition",id:"puma_rf_e2e-5-repeated-link-failures-post-network-ignition",level:3},{value:"<code>PUMA_RF_E2E-6</code> Repeated node failure(s) post network ignition",id:"puma_rf_e2e-6-repeated-node-failures-post-network-ignition",level:3},{value:"<code>PUMA_RF_E2E-7</code> Network outage to controller",id:"puma_rf_e2e-7-network-outage-to-controller",level:3},{value:"<code>PUMA_RF_E2E-8</code> Controller crash test",id:"puma_rf_e2e-8-controller-crash-test",level:3},{value:"<code>PUMA_RF_E2E-9</code> Software Upgrade/Downgrade test using BitTorrent",id:"puma_rf_e2e-9-software-upgradedowngrade-test-using-bittorrent",level:3},{value:"<code>PUMA_RF_E2E-10</code> Remove and add nodes and links from topology file",id:"puma_rf_e2e-10-remove-and-add-nodes-and-links-from-topology-file",level:3},{value:"<code>PUMA_RF_E2E-11</code> Verify controller side config validation framework",id:"puma_rf_e2e-11-verify-controller-side-config-validation-framework",level:3},{value:"<code>PUMA_RF_E2E-12.2</code> Multiple node BGP POP config",id:"puma_rf_e2e-122-multiple-node-bgp-pop-config",level:3},{value:"<code>PUMA_RF_E2E-12.1</code> Network ignition with 2 POP sites with BGP",id:"puma_rf_e2e-121-network-ignition-with-2-pop-sites-with-bgp",level:3},{value:"<code>PUMA_RF_E2E-13.1</code> High Availability test - network interface Down on primary E2E",id:"puma_rf_e2e-131-high-availability-test---network-interface-down-on-primary-e2e",level:3},{value:"<code>PUMA_RF_E2E-13.2</code> High Availability test - reboot primary E2E",id:"puma_rf_e2e-132-high-availability-test---reboot-primary-e2e",level:3},{value:"<code>PUMA_RF_E2E-14</code> Controller switch after topology change, changes reflect in passive controller",id:"puma_rf_e2e-14-controller-switch-after-topology-change-changes-reflect-in-passive-controller",level:3},{value:"<code>PUMA_RF_E2E-15</code> E2E does not report link re-ignitions in IF steady state",id:"puma_rf_e2e-15-e2e-does-not-report-link-re-ignitions-in-if-steady-state",level:3},{value:"<code>PUMA_RF_E2E-17</code> Change channel, MCS, txpower, Disable GPS of entire network",id:"puma_rf_e2e-17-change-channel-mcs-txpower-disable-gps-of-entire-network",level:3},{value:"<code>PUMA_RF_E2E-18</code> E2E controller should ignite the CNs even when some other CNs and/or links are down",id:"puma_rf_e2e-18-e2e-controller-should-ignite-the-cns-even-when-some-other-cns-andor-links-are-down",level:3},{value:"Neighbor Discovery Tests",id:"neighbor-discovery-tests",level:2},{value:"<code>PUMA_RF_E2E-19</code> Topology Scan tests",id:"puma_rf_e2e-19-topology-scan-tests",level:3},{value:"<code>PUMA_RF_E2E-20</code> Link Discovery scan tests",id:"puma_rf_e2e-20-link-discovery-scan-tests",level:3},{value:"<code>PUMA_RF_E2E-21</code> Redundancy-DN goes down",id:"puma_rf_e2e-21-redundancy-dn-goes-down",level:3},{value:"<code>PUMA_RF_E2E-22</code> Redundancy-DN goes down",id:"puma_rf_e2e-22-redundancy-dn-goes-down",level:3},{value:"<code>PUMA_RF_E2E-23</code> Redundancy-CN goes down",id:"puma_rf_e2e-23-redundancy-cn-goes-down",level:3},{value:"<code>PUMA_RF_E2E-24</code> Redundancy-CN goes down",id:"puma_rf_e2e-24-redundancy-cn-goes-down",level:3}],d={toc:p};function u(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"e2e-controller-tests"},"E2E Controller Tests"),(0,l.kt)("h2",{id:"basic-tests"},"Basic Tests"),(0,l.kt)("h3",{id:"puma_rf_e2e-reg-1-rf-software-upgradedowngrade-test"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-REG-1")," RF Software Upgrade/Downgrade Test"),(0,l.kt)("p",null,"Description: This test is to check that the network successfully does upgrade\nand downgrade and comes back online after software upgrade/downgrade."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Upgrade both primary and backup controller to new version"),(0,l.kt)("li",{parentName:"ul"},"Downgrade to a previous stable code"),(0,l.kt)("li",{parentName:"ul"},"Download code and upgrade whole network to new version"),(0,l.kt)("li",{parentName:"ul"},"Measure time taken for prepare and commit phase")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"All nodes should be able to download new code and run upgrade and successful\ncome back online within given timeout")),(0,l.kt)("h3",{id:"puma_rf_e2e-reg-2-power-outage-network-recovery-test"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-REG-2")," Power Outage network recovery Test"),(0,l.kt)("p",null,"Description: This test checks that after power outage the network ignites by\nitself."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Check network is ignited"),(0,l.kt)("li",{parentName:"ul"},"Power cycle all nodes by using the PDUs on the poles remotely"),(0,l.kt)("li",{parentName:"ul"},"Check network recovery"),(0,l.kt)("li",{parentName:"ul"},"Repeat 10 times")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Validate all links and nodes come back online after power failure within given\ntimeout")),(0,l.kt)("h3",{id:"puma_rf_e2e-reg-3-pop-fiber-cut-test-multi-pop"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-REG-3")," POP Fiber cut Test (multi-POP)"),(0,l.kt)("p",null,"Description: This test is to check that if connection to 1 POP node is\nterminated then the network will recover and reroute through the other POP\nnodes."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Check network is ignited"),(0,l.kt)("li",{parentName:"ul"},"Switch off fiber port on ubiquiti switch connecting to one of the POP nodes")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Network should recover and reroute through other POP node"),(0,l.kt)("li",{parentName:"ul"},"All links and nodes should be online in the topology")),(0,l.kt)("h3",{id:"puma_rf_e2e-reg-4-pop-fiber-cut-test-single-pop"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-REG-4")," POP Fiber cut Test (single-POP)"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology with single POP. Post network ignition, cutting the fiber\nfrom switch to POP and checking whether the network is down"),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Ignite the topology (single POP)"),(0,l.kt)("li",{parentName:"ul"},"switch off fiber port on ubiquiti switch connecting to POP"),(0,l.kt)("li",{parentName:"ul"},"switch on the fiber port on ubiquiti switch connecting to POP")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Network goes down after the fiber cut to POP happens."),(0,l.kt)("li",{parentName:"ul"},"After switching on the fiber connectivity to POP the network should be up and\nactive.")),(0,l.kt)("h3",{id:"puma_rf_e2e-1-network-ignition-tests"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-1")," Network Ignition Tests"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology. Post network ignition, each node in the topology is pinged\nfrom the controller to validate connectivity."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Bring up the network using x86 controller. To bring up a network,",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Existing topology file can be copied to the controller and controller can\nbe started using systemctl services."))),(0,l.kt)("li",{parentName:"ul"},"After ignition of the network, ping from E2E to all nodes."),(0,l.kt)("li",{parentName:"ul"},"Check whether the network is up and active."),(0,l.kt)("li",{parentName:"ul"},"Check the ignition state of the controller using REST API.\n(",(0,l.kt)("inlineCode",{parentName:"li"},"/api/getIgnitionState"),")")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"All links remain up and reachable from controller to all nodes and ping\nsession remains unaffected."),(0,l.kt)("li",{parentName:"ul"},"Ping from E2E to all nodes should succeed."),(0,l.kt)("li",{parentName:"ul"},"Ignition time of the fig-of-8 network must be less than 5 min.")),(0,l.kt)("h3",{id:"puma_rf_e2e-2-pop-node-power-cycle-test"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-2")," POP node power cycle test"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology.  In this test, POP node comes back online after the power\ncycle and all links and nodes in the network are expected to recover."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Bring up the network using x86 controller with all the nodes."),(0,l.kt)("li",{parentName:"ul"},"Check whether the network is up and active."),(0,l.kt)("li",{parentName:"ul"},"Power cycle the pop_node in the topology (",(0,l.kt)("inlineCode",{parentName:"li"},"/api/rebootNode"),")"),(0,l.kt)("li",{parentName:"ul"},"While pop_node is down, send traffic through POP node to all other nodes."),(0,l.kt)("li",{parentName:"ul"},"While sending traffic when POP node is down, throughput drops to zero."),(0,l.kt)("li",{parentName:"ul"},"After POP is up, throughput should raise."),(0,l.kt)("li",{parentName:"ul"},"Validate all wireless links are up and routable from the pop_node.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Throughput of zero is observed while traffic is pushed from controller when\nPOP is down."),(0,l.kt)("li",{parentName:"ul"},"Raising in the throughput value should happen while traffic is pushed from\ncontroller after POP is up.")),(0,l.kt)("h3",{id:"puma_rf_e2e-3-node-failure-during-network-ignition"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-3")," Node failure during network ignition"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology.  However, during the process of network ignition, some\nnode are rebooted and check whether E2E is bringing up the network."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Ignite the network using x86 controller."),(0,l.kt)("li",{parentName:"ul"},"During network ignition, randomly pick a DN and reboot it."),(0,l.kt)("li",{parentName:"ul"},"Wait for the last DN to boot up (ping sectors through OOB)."),(0,l.kt)("li",{parentName:"ul"},"Check to see all the links in the topology came up successfully."),(0,l.kt)("li",{parentName:"ul"},"Ping each node and see for connectivity."),(0,l.kt)("li",{parentName:"ul"},"Iterate node bootup for 5 times and check for connectivity")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"All the links in the testbed successfully come up.")),(0,l.kt)("h3",{id:"puma_rf_e2e-4-link-failure-during-network-ignition"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-4")," Link failure during network ignition"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology. During the process of network ignition, any of the\npreviously ignited links goes down."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using x86 controller."),(0,l.kt)("li",{parentName:"ol"},"During network ignition, bring down an ignited link (tg link down/attenuator)\nusing ",(0,l.kt)("inlineCode",{parentName:"li"},"/api/setLinkStatus"),"."),(0,l.kt)("li",{parentName:"ol"},"Check to see all the links in the topology came up successfully after 60\nsec (re-ignition time?)."),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes and see for connectivity.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All the links in the testbed successfully come up."),(0,l.kt)("li",{parentName:"ol"},"No wireless link takes more than 5 attempts to come up.")),(0,l.kt)("h3",{id:"puma_rf_e2e-5-repeated-link-failures-post-network-ignition"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-5")," Repeated link failure(s) post network ignition"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology. During the process of network ignition, any of the\npreviously ignited links go down repeatedly."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network and ping across each wireless link to validate\nconnectivity."),(0,l.kt)("li",{parentName:"ol"},"Pick any wireless links at random and take them down (",(0,l.kt)("inlineCode",{parentName:"li"},"tg link down"),") using\n",(0,l.kt)("inlineCode",{parentName:"li"},"/api/setLinkStatus"),"."),(0,l.kt)("li",{parentName:"ol"},"Wait (X*60) seconds for E2E controller to re-ignite links.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"X = { 1, 2, 3, 4 }"))),(0,l.kt)("li",{parentName:"ol"},"Ping across each wireless link (can use lo interface) to validate\nconnectivity. (",(0,l.kt)("inlineCode",{parentName:"li"},"/api/startPing"),")"),(0,l.kt)("li",{parentName:"ol"},"Ping to each end of each wireless link to validate they are reachable via E2E\ncontroller and pop_node."),(0,l.kt)("li",{parentName:"ol"},"Repeat the above steps 20 times.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Network check to see all the links in the topology came up successfully."),(0,l.kt)("li",{parentName:"ol"},"E2E controller is able to re-ignite all links taken down within (X*60)\nseconds and they are pingable across local DN sector interfaces and reachable\nvia the pop_node.")),(0,l.kt)("h3",{id:"puma_rf_e2e-6-repeated-node-failures-post-network-ignition"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-6")," Repeated node failure(s) post network ignition"),(0,l.kt)("p",null,"Description: This test checks network ignition functionality on a standard\nfigure of 8 topology. During the process of network ignition, any of the\npreviously ignited node go down repeatedly."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Ignite the network topology using x86 controller."),(0,l.kt)("li",{parentName:"ul"},"Ping across each wireless link (using link local addresses) to validate\nconnectivity. (",(0,l.kt)("inlineCode",{parentName:"li"},"/api/startPing"),")"),(0,l.kt)("li",{parentName:"ul"},"Pick up to X DN sectors at random and take them down (via reboot).\n(",(0,l.kt)("inlineCode",{parentName:"li"},"/api/rebootNode"),")"),(0,l.kt)("li",{parentName:"ul"},"Wait (X*60) seconds for DNs to boot up within 60 seconds.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"X = { 1, 2, 3, 4 }"))),(0,l.kt)("li",{parentName:"ul"},"Wait (X*60) seconds for E2E controller to re-ignite all DN sectors.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"X = { 1, 2, 3, 4 }"))),(0,l.kt)("li",{parentName:"ul"},"Ping each sector from pop_node."),(0,l.kt)("li",{parentName:"ul"},"Repeat the above steps 10 times.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Check to see all the links in the topology came up successfully."),(0,l.kt)("li",{parentName:"ul"},"E2E controller is able to re-ignite all DN sectors taken down within (X*60)\nseconds of them coming up and they are reachable via the pop_node.")),(0,l.kt)("h3",{id:"puma_rf_e2e-7-network-outage-to-controller"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-7")," Network outage to controller"),(0,l.kt)("p",null,"Description: This test checks whether network is unperturbed by temporary loss\nof connectivity to E2E in figure of 8 topology."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using x86 controller."),(0,l.kt)("li",{parentName:"ol"},"Check network state to verify if all links are enabled and nodes are\nreachable(recheck network state)."),(0,l.kt)("li",{parentName:"ol"},"Take down controller network interface for 300 sec (but do not shut down the\ncontroller)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ifconfig ens160 down; sleep 300; ifconfig ens160 up")))),(0,l.kt)("li",{parentName:"ol"},"In parallel, Ping between nodes while the controller is not reachable from\nthem."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state again after 300sec while pinging across all the nodes")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All paths are up and operational after restoration of connection to E2E"),(0,l.kt)("li",{parentName:"ol"},"Ping between all nodes/Paths should have 0% packet loss.")),(0,l.kt)("h3",{id:"puma_rf_e2e-8-controller-crash-test"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-8")," Controller crash test"),(0,l.kt)("p",null,"Description: This test checks whether network is unperturbed by killing E2E in\nfigure of 8 topology."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using x86 controller."),(0,l.kt)("li",{parentName:"ol"},"Check network state to verify if all links are enabled and nodes are\nreachable(recheck network state)."),(0,l.kt)("li",{parentName:"ol"},"Start iterate (count: 5)",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Start ping from from POP to any node and in parallel, kill E2E controller\non the controller x86. Ping across each wireless link (using lo address)\nto validate L3 wireless connectivity. (",(0,l.kt)("inlineCode",{parentName:"li"},"killall e2e_controller"),")"),(0,l.kt)("li",{parentName:"ol"},"Bring down any link in the network while E2E is down. (",(0,l.kt)("inlineCode",{parentName:"li"},"tg link down"),")"),(0,l.kt)("li",{parentName:"ol"},"Re-spawn E2E controller on x86 and wait 60 seconds"))),(0,l.kt)("li",{parentName:"ol"},"End iterate")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All links remain up and reachable via POP node after re-spawning E2E\ncontroller."),(0,l.kt)("li",{parentName:"ol"},"Ping session remains unaffected during the duration of controller\nkill/restart.")),(0,l.kt)("h3",{id:"puma_rf_e2e-9-software-upgradedowngrade-test-using-bittorrent"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-9")," Software Upgrade/Downgrade test using BitTorrent"),(0,l.kt)("p",null,'Description: The purpose of this test is to validate the BitTorrent SW upgrade\nprocess at the network level, for a figure of "8" network topology.'),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Upgrade steps:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Add the image binary file manually to the ",(0,l.kt)("inlineCode",{parentName:"li"},"/data/images")," directory and restart\ncontroller."),(0,l.kt)("li",{parentName:"ul"},"The image file name has to be in the format ",(0,l.kt)("inlineCode",{parentName:"li"},"<NAME>.bin")," where NAME is the MD5\nstring of the binary image. The MD5 string is part of the binary file header."),(0,l.kt)("li",{parentName:"ul"},"During ignition of controller, global addressable ipv6 interface on the\ncontroller is set on the flag as ",(0,l.kt)("inlineCode",{parentName:"li"},"bt_tracker_ipv6_global_addressable_ifname"),'\n"interfacename".')),(0,l.kt)("p",null,"APIs used:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/sendUpgradeRequest\n/api/getUpgradeState\n/api/getUpgradeCommitPlan\n/api/addUpgradeImage\n/api/delUpgradeImage\n/api/listUpgradeImages\n/api/abortUpgrade\n")),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Bring up TG network using E2E controller on a X86 machine. Set the flag\n",(0,l.kt)("inlineCode",{parentName:"li"},"bt_tracker_ipv6_global_addressable_ifname"),' "interfacename" during ignition.'),(0,l.kt)("li",{parentName:"ol"},"Start the tracker in the port 6969 by running command:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tg upgrade torrent start_tracker -g ens160 -p 6969")))),(0,l.kt)("li",{parentName:"ol"},"Kill the running e2e_controller and then start again."),(0,l.kt)("li",{parentName:"ol"},'Run the prepare torrent command"',(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tg upgrade network prepare_torrent -m 'magnet url' --md5 'md5 of bin'")),(0,l.kt)("li",{parentName:"ul"},"Magnet url and md5 can be obtained by running command on the controller:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tg upgrade torrent list_images")))))),(0,l.kt)("li",{parentName:"ol"},"Run a script (",(0,l.kt)("inlineCode",{parentName:"li"},"/data/stop_minion.sh"),") on all nodes to emulate random nodes\ndown by restarting e2e_minion at random time interval."),(0,l.kt)("li",{parentName:"ol"},"Delay for 300 seconds"),(0,l.kt)("li",{parentName:"ol"},"Check if all nodes are prepared (excluding the ones which were\ndown). Optimization: All nodes should be prepared."),(0,l.kt)("li",{parentName:"ol"},"Run command to prepare all nodes again."),(0,l.kt)("li",{parentName:"ol"},"Check if all nodes are prepared (including the ones which were down)."),(0,l.kt)("li",{parentName:"ol"},"Commit upgrade:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tg upgrade network commit")))),(0,l.kt)("li",{parentName:"ol"},"Verify if upgrade is successful."),(0,l.kt)("li",{parentName:"ol"},"Follow the steps from 2 to 10 for downgrade with new image."),(0,l.kt)("li",{parentName:"ol"},"Verify if downgrade is successful.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Network comes up with new software for all nodes."),(0,l.kt)("li",{parentName:"ol"},"Optimization: Nodes are not reflashed a 2nd time with same software version.")),(0,l.kt)("h3",{id:"puma_rf_e2e-10-remove-and-add-nodes-and-links-from-topology-file"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-10")," Remove and add nodes and links from topology file"),(0,l.kt)("p",null,"Description: Validate controller addition and deletion of nodes/links to\ntopology from the TG CLI."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Bring up network using x86 controller and check if all links are up."),(0,l.kt)("li",{parentName:"ol"},"Disable auto-ignition."),(0,l.kt)("li",{parentName:"ol"},"Bring down 1 or 2 links from the topology"),(0,l.kt)("li",{parentName:"ol"},"Remove the links brought down in step 3 using E2E API."),(0,l.kt)("li",{parentName:"ol"},"Remove nodes forming the links which are down from the topology using E2E\nCLI."),(0,l.kt)("li",{parentName:"ol"},"check if the E2E state machine is stable and nodes are deleted."),(0,l.kt)("li",{parentName:"ol"},"Add nodes back to topology using API."),(0,l.kt)("li",{parentName:"ol"},"Add the deleted links back to topology using API."),(0,l.kt)("li",{parentName:"ol"},"Make the links alive by using API."),(0,l.kt)("li",{parentName:"ol"},"Enable auto ignition."),(0,l.kt)("li",{parentName:"ol"},"Verify the new nodes are now in topology and reporting to controller"),(0,l.kt)("li",{parentName:"ol"},"Run ping to verify connectivity.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"APIs used:\n/api/setLinkStatus\n/api/setIgnitionState\n/api/addLink\n/api/delLink\n/api/addNode\n/api/delNode\n/api/startPing\n")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Verify that the E2E state machine is stable and nodes are deleted and added\nback.")),(0,l.kt)("h3",{id:"puma_rf_e2e-11-verify-controller-side-config-validation-framework"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-11")," Verify controller side config validation framework"),(0,l.kt)("p",null,"Description: E2E Verify controller config tests to validate E2E will throw error\nif incorrect values are pushed for the nodes."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite network using x86 controller."),(0,l.kt)("li",{parentName:"ol"},"Set ",(0,l.kt)("inlineCode",{parentName:"li"},"forceGpsDisable"),' to "x" for a node using TG CLI on the controller.'),(0,l.kt)("li",{parentName:"ol"},"Set ",(0,l.kt)("inlineCode",{parentName:"li"},"OOB_INTERFACE"),' to "nic3" for the network or particular node using TG\nCLI.'),(0,l.kt)("li",{parentName:"ol"},"Set ",(0,l.kt)("inlineCode",{parentName:"li"},"laMaxMcs")," to 50 using TG CLI on controller."),(0,l.kt)("li",{parentName:"ol"},"Check if all commands fail with error and config is not pushed to network.")),(0,l.kt)("p",null,"APIs used:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/setNodeOverridesConfig\n/api/getNodeOverridesConfig\n")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Verify if the config is validated on the controller side and incorrect values\nare not pushed to the network.")),(0,l.kt)("h3",{id:"puma_rf_e2e-122-multiple-node-bgp-pop-config"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-12.2")," Multiple node BGP POP config"),(0,l.kt)("p",null,"Description: To test multiple BGP sessions to two different IP's on switch using\ndifferent sites in a network."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Configure multiple BGP sessions from 2 different switches to both the POP\nsites."),(0,l.kt)("li",{parentName:"ol"},"Ignite the network and validate both POP are up."),(0,l.kt)("li",{parentName:"ol"},"Disconnect fiber cable from one POP (manually? / port down?)."),(0,l.kt)("li",{parentName:"ol"},"Run pings from both the POP nodes."),(0,l.kt)("li",{parentName:"ol"},"While ping is running, cut POP and check for ping latency.")),(0,l.kt)("p",null,"APIs used:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/getNodeConfig\n/api/setNodeOverridesConfig\n/api/getNodeOverridesConfig\n")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All pings go through and there is no loss of connectivity while failing POP\nor connectivity to router."),(0,l.kt)("li",{parentName:"ol"},"Ping latency (need to confirm numbers)")),(0,l.kt)("h3",{id:"puma_rf_e2e-121-network-ignition-with-2-pop-sites-with-bgp"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-12.1")," Network ignition with 2 POP sites with BGP"),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Configure 2 sites on fig-8 as POP nodes with BGP configured to the same peer"),(0,l.kt)("li",{parentName:"ol"},"Ignite the network and validate both POP nodes and whole network is up"),(0,l.kt)("li",{parentName:"ol"},"Validate BGP sessions are established on both POP nodes and default route is\nadvertized"),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes from POP sites to validate connectivity")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Network Ignites successfully"),(0,l.kt)("li",{parentName:"ol"},"Both POP nodes are online, with BGP established and advertising default"),(0,l.kt)("li",{parentName:"ol"},"All pings go through")),(0,l.kt)("h3",{id:"puma_rf_e2e-131-high-availability-test---network-interface-down-on-primary-e2e"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-13.1")," High Availability test - network interface Down on primary E2E"),(0,l.kt)("p",null,"Description: This test checks high availability feature of E2E on a standard\nfigure of 8 topology (with two E2E controllers on a network)."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using primary x86 controller with all the necessary\ncontroller configs on primary and secondary."),(0,l.kt)("li",{parentName:"ol"},"Check network state to verify if all links are enabled and nodes are\nreachable (recheck network state)."),(0,l.kt)("li",{parentName:"ol"},"In parallel:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Take down primary controller network interface for 300 sec (but do not\nshut down the controller)."),(0,l.kt)("li",{parentName:"ol"},"Ping between nodes."))),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes from primary controller."),(0,l.kt)("li",{parentName:"ol"},"Check state. (",(0,l.kt)("inlineCode",{parentName:"li"},"/api/getHighAvailabilityState"),")")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All paths are up and operational after restoration of connection to E2E and\nping between all nodes/Paths should have 0% packet loss."),(0,l.kt)("li",{parentName:"ol"},"when primary controller is down the backup should be in 'active' state and\nnetwork should remain up"),(0,l.kt)("li",{parentName:"ol"},"when primary is restarted, it should go back to 'active' state and backup\nshould go back to 'passive' state"),(0,l.kt)("li",{parentName:"ol"},"All links and nodes in network should remain online")),(0,l.kt)("h3",{id:"puma_rf_e2e-132-high-availability-test---reboot-primary-e2e"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-13.2")," High Availability test - reboot primary E2E"),(0,l.kt)("p",null,"Description: This test checks high availability feature of E2E on a standard\nfigure of 8 topology (with two E2E controllers on a network)."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using primary x86 controller with all the necessary\ncontroller configs on primary and secondary."),(0,l.kt)("li",{parentName:"ol"},"Check network state to verify if all links are enabled and nodes are\nreachable (recheck network state)."),(0,l.kt)("li",{parentName:"ol"},"In parallel:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Reboot the primary E2E"),(0,l.kt)("li",{parentName:"ol"},"Ping between nodes."))),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes from primary controller."),(0,l.kt)("li",{parentName:"ol"},"Check state. (",(0,l.kt)("inlineCode",{parentName:"li"},"/api/getHighAvailabilityState"),")")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All paths are up and operational after restoration of connection to E2E and\nping between all nodes/Paths should have 0% packet loss."),(0,l.kt)("li",{parentName:"ol"},"when primary controller is down the backup should be in 'active' state and\nnetwork should remain up"),(0,l.kt)("li",{parentName:"ol"},"when primary is restarted, it should go back to 'active' state and backup\nshould go back to 'passive' state"),(0,l.kt)("li",{parentName:"ol"},"All links and nodes in network should remain online")),(0,l.kt)("h3",{id:"puma_rf_e2e-14-controller-switch-after-topology-change-changes-reflect-in-passive-controller"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-14")," Controller switch after topology change, changes reflect in passive controller"),(0,l.kt)("p",null,"Description: This test checks high availability feature of E2E on a standard\nfigure of 8 topology (with two E2E controllers on a network)."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Ignite the network using primary x86 controller with all the necessary\ncontroller configs on primary and secondary."),(0,l.kt)("li",{parentName:"ol"},"Check network state to verify if all links are enabled and nodes are\nreachable (recheck network state)."),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes from primary controller"),(0,l.kt)("li",{parentName:"ol"},"Remove some links and nodes in the topology file.",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Backup original topology file to later restore"))),(0,l.kt)("li",{parentName:"ol"},"Confirm change propagated back to secondary"),(0,l.kt)("li",{parentName:"ol"},"Give outage to primary for 300s and restore original topology on primary"),(0,l.kt)("li",{parentName:"ol"},"Ping all nodes from secondary controller - during 300s outage - Ensure its\nthe same as step 5 missing the changes made"),(0,l.kt)("li",{parentName:"ol"},"After primary comes up ensure another ping check matches step 5")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All paths are up and operational after restoration of connection to E2E"),(0,l.kt)("li",{parentName:"ol"},"Ping between all nodes/Paths should have 0% packet loss"),(0,l.kt)("li",{parentName:"ol"},"At the end of step 6, passive controller topology should not include the\nnodes and links removed."),(0,l.kt)("li",{parentName:"ol"},"At the end of step 8, passive controller topology should show the nodes and\nlinks added."),(0,l.kt)("li",{parentName:"ol"},"Ping between all nodes/Paths should have 0% packet loss")),(0,l.kt)("h3",{id:"puma_rf_e2e-15-e2e-does-not-report-link-re-ignitions-in-if-steady-state"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-15")," E2E does not report link re-ignitions in IF steady state"),(0,l.kt)("p",null,"Description: To verify there are no link re-ignition attempts when the network\nis stable."),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Bring up TG network using E2E controller on x86 machine."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state."),(0,l.kt)("li",{parentName:"ol"},"Ping for 3660 seconds on all terra interface for all links."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"All pings should go through with 0% packet loss."),(0,l.kt)("li",{parentName:"ol"},"LinkupAttempts in the topology should not increment.")),(0,l.kt)("h3",{id:"puma_rf_e2e-17-change-channel-mcs-txpower-disable-gps-of-entire-network"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-17")," Change channel, MCS, txpower, Disable GPS of entire network"),(0,l.kt)("p",null,"Description: Validate if network remains in a stable state if channel, MCS,\nTxPower is changed and all nodes are up. Also, check if network remains in a\nstable state if GPS is disabled in-band using config manager."),(0,l.kt)("p",null,"Test Setup: Fig-of-8(RF)"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Bring up the F8-CN network using the E2E controller with managed config\nenabled"),(0,l.kt)("li",{parentName:"ol"},"Change channel to 3.",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"tg fw network channel_config --channel #")," (# = 1, 3, & 4)"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"/api/setNodeOverridesConfig")))),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed' when config is changed so links and node should stay up\nafter config change)"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Change channel back to 2."),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Change MCS to 3/5/7/9/10/12 on all nodes using E2E API"),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Change MCS back to 12."),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Change TxPower to 12/17/21 on different nodes using using E2E API."),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Change TxPower back to 21."),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check fw params to see if channel is updated"),(0,l.kt)("li",{parentName:"ol"},"Disable GPS for whole network using E2E API (timeout: 300 sec)"),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')"),(0,l.kt)("li",{parentName:"ol"},"Check if GPS is disabled in all nodes in firmware"),(0,l.kt)("li",{parentName:"ol"},"Enable GPS back in all nodes."),(0,l.kt)("li",{parentName:"ol"},"Check if network remains up after config change (expected action is 'set fw\nparams when changed')")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Verify channel is changed for whole network and all nodes/link are online on\nnew channel using TG CLI after step 5."),(0,l.kt)("li",{parentName:"ul"},"MCS is changed for whole network and all nodes/link are online. Nodes and\nlinks should not flap while MCS is changed (after step 9)"),(0,l.kt)("li",{parentName:"ul"},"TxPower is changed for whole network and all nodes/link are online (after step\n11). Nodes and links should not flap while Tx power is changed."),(0,l.kt)("li",{parentName:"ul"},"Network remains up with GPS disabled on all nodes.(after step 15)")),(0,l.kt)("h3",{id:"puma_rf_e2e-18-e2e-controller-should-ignite-the-cns-even-when-some-other-cns-andor-links-are-down"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-18")," E2E controller should ignite the CNs even when some other CNs and/or links are down"),(0,l.kt)("p",null,"Description: To verify that E2E controller is able to ignite the P2MP setup even\nwhen some nodes and links are down."),(0,l.kt)("p",null,"Test Setup: P2MP"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Bring up TG network(P2MP setup) using E2E controller on x86 machine."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state."),(0,l.kt)("li",{parentName:"ol"},"Stop minion on CN0, CN1, CN2 and CN3."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state should show the CN0,CN1, CN2 and CN3 nodes as offline\nand links associated with them as false."),(0,l.kt)("li",{parentName:"ol"},"Give a delay of 60 seconds."),(0,l.kt)("li",{parentName:"ol"},"Start minion on CN0 and CN1."),(0,l.kt)("li",{parentName:"ol"},"Recheck network state should show the CN2 and CN3 nodes as offline and links\nassociated with them as false while other links(CN0 and CN1) should be\nignited."),(0,l.kt)("li",{parentName:"ol"},"Stop minion service on  CN0 and CN1."),(0,l.kt)("li",{parentName:"ol"},"Start minion on CN2 and CN3."),(0,l.kt)("li",{parentName:"ol"},"Give a delay of 60 seconds and check network state"),(0,l.kt)("li",{parentName:"ol"},"Recheck network state should show the CN0 and CN1 nodes as offline and links\nassociated with them as false. CN2 and CN3 should show as ONLINE and links\nassociated with them as true."),(0,l.kt)("li",{parentName:"ol"},"Start minion on CN0 and CN1."),(0,l.kt)("li",{parentName:"ol"},"Network should come up with all nodes after a delay of 60 seconds.")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Recheck network state after step 13 should have all the nodes as online and\nall links as true.")),(0,l.kt)("h2",{id:"neighbor-discovery-tests"},"Neighbor Discovery Tests"),(0,l.kt)("h3",{id:"puma_rf_e2e-19-topology-scan-tests"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-19")," Topology Scan tests"),(0,l.kt)("p",null,"Description: This test performs a topology scan at a given node, returning\ninformation about nearby nodes in a P2MP setup."),(0,l.kt)("p",null,"Test Setup: RF P2MP"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Start the E2E controller service in E2E controller"),(0,l.kt)("li",{parentName:"ol"},"Set the auto ignition to be disabled."),(0,l.kt)("li",{parentName:"ol"},"Shut down the DN --\x3e CN1 and DN\u2014CN2 links down (",(0,l.kt)("inlineCode",{parentName:"li"},"tg link down"),")"),(0,l.kt)("li",{parentName:"ol"},"Initiate a Topology Scan (2 times) from DN using API service (",(0,l.kt)("inlineCode",{parentName:"li"},"txNode"),": DN)\nusing ",(0,l.kt)("inlineCode",{parentName:"li"},"/api/startTopologyScan"),".")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The output of the API call must have the details of all the CN1 and CN2(whose\nlinks are down) as responders address in the network. It must have 2 outputs\nwith all the CN's details."),(0,l.kt)("li",{parentName:"ul"},"Check in the output of API for the CN1 and CN2 MAC address")),(0,l.kt)("h3",{id:"puma_rf_e2e-20-link-discovery-scan-tests"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-20")," Link Discovery scan tests"),(0,l.kt)("p",null,"Description: This test performs a link discovery scan at a given node, returning\ninformation about the best link(s) for a node."),(0,l.kt)("p",null,"Test Setup: RF P2MP"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Start the E2E controller service in E2E controller"),(0,l.kt)("li",{parentName:"ol"},"Set the auto ignition to be disabled. (Make sure the DNs and CN0 link is not\nalive with ",(0,l.kt)("inlineCode",{parentName:"li"},"tg link down"),")"),(0,l.kt)("li",{parentName:"ol"},"Initiate a Topology Scan from CN using API service (",(0,l.kt)("inlineCode",{parentName:"li"},"targetMac"),": CN0) using\n",(0,l.kt)("inlineCode",{parentName:"li"},"/api/startLinkDiscoveryScan"),"."),(0,l.kt)("li",{parentName:"ol"},"Use API call to get the results of the scan status.\n(",(0,l.kt)("inlineCode",{parentName:"li"},"/api/getLinkDiscoveryScanStatus"),")")),(0,l.kt)("p",null,"Pass/Fail Criteria:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"At the end of step 3, \"Link discovery scans started' message must be received."),(0,l.kt)("li",{parentName:"ul"},"The output of the API call after step 4 must have the MAC address of DN which\nhave link in the topology file.")),(0,l.kt)("h3",{id:"puma_rf_e2e-21-redundancy-dn-goes-down"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-21")," Redundancy-DN goes down"),(0,l.kt)("p",null,"Description: P2P test between DN-P and CN where DN-P goes down and CN connects\nto the backup DN-B"),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Initialize the topology with the backup link DN-B \u2194 CN and add\nis_backup_cn_link = true"),(0,l.kt)("li",{parentName:"ul"},"Bring up the link Between DN-P \u2194 CN using E2E"),(0,l.kt)("li",{parentName:"ul"},"Power down DN-P using PDU (don't bring it up)"),(0,l.kt)("li",{parentName:"ul"},"Controller should bring up the link between DN-B \u2194 CN (Only if DN-P has been\ndown for over 5 mins as ",(0,l.kt)("inlineCode",{parentName:"li"},"linkup_backup_cn_link_interval")," default value is 5\nmins)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Run test with different interval values: 30 sec, 1 min, 3 min and default\nvalue (5 min)")))),(0,l.kt)("p",null,"Passing:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"E2E controller will ignite the DN-B \u2194 CN link after DN-P goes down")),(0,l.kt)("h3",{id:"puma_rf_e2e-22-redundancy-dn-goes-down"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-22")," Redundancy-DN goes down"),(0,l.kt)("p",null,"Description: P2P test between DN-P and CN where DN-P \u2194 CN goes down DN-P turns\noff and CN connects to the backup DN-B"),(0,l.kt)("p",null,"Test Setup: Fig-of-8"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Initialize the topology with the backup link DN-B \u2194 CN and add\nis_backup_cn_link = true"),(0,l.kt)("li",{parentName:"ul"},"Bring up the link Between DN-P \u2194 CN using E2E"),(0,l.kt)("li",{parentName:"ul"},"Bring down the link between DN-P \u2194 CN and then power off DN-P using PDU"),(0,l.kt)("li",{parentName:"ul"},"Controller should bring up the link between DN-B \u2194 CN (Only if DN-P has been\ndown for over 5 mins as ",(0,l.kt)("inlineCode",{parentName:"li"},"linkup_backup_cn_link_interval")," default value is 5\nmins)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Run test with different interval values: 30 sec, 1 min, 3 min and default\nvalue (5 min)")))),(0,l.kt)("p",null,"Passing:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"E2E controller will ignite the DN-B \u2194 CN link after DN-P goes down")),(0,l.kt)("h3",{id:"puma_rf_e2e-23-redundancy-cn-goes-down"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-23")," Redundancy-CN goes down"),(0,l.kt)("p",null,"Description: P2P test between DN and CN where CN goes down and comes back up and\nit connects back to DN-P"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Initialize the topology with the backup link DN-B \u2194 CN and add\nis_backup_cn_link = true"),(0,l.kt)("li",{parentName:"ul"},"Bring up the link Between DN-P \u2194 CN using E2E"),(0,l.kt)("li",{parentName:"ul"},"Reboot CN"),(0,l.kt)("li",{parentName:"ul"},"Controller brings up the link between DN-P \u2194 CN")),(0,l.kt)("p",null,"Passing:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"E2E controller will ignite the DN-P \u2194 CN link after CN reboots")),(0,l.kt)("h3",{id:"puma_rf_e2e-24-redundancy-cn-goes-down"},(0,l.kt)("inlineCode",{parentName:"h3"},"PUMA_RF_E2E-24")," Redundancy-CN goes down"),(0,l.kt)("p",null,"Description: P2P test between DN and CN where CN goes down for over 5 mins and\ncomes back up and it connects back to either DN-P or DN-B"),(0,l.kt)("p",null,"Procedure:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Initialize the topology with the backup link DN-B \u2194 CN and add\nis_backup_cn_link = true"),(0,l.kt)("li",{parentName:"ul"},"Bring up the link Between DN-P \u2194 CN using E2E"),(0,l.kt)("li",{parentName:"ul"},"Power down CN for over 5 mins(using PDU) and power it on"),(0,l.kt)("li",{parentName:"ul"},"Controller brings up the link between DN-P \u2194 CN or DN-B \u2194 CN")),(0,l.kt)("p",null,"Passing:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"E2E controller will ignite either DN-P \u2194 CN or DN-B \u2194 CN after CN powers on.")))}u.isMDXComponent=!0}}]);